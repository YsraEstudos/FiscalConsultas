
> client@0.0.0 test
> vitest run


[1m[46m RUN [49m[22m [36mv4.0.17 [39m[90mC:/Users/israe/Downloads/faz tudo/Fiscal/client[39m

 [32mÃ”Â£Ã´[39m tests/unit/id_utils.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 9[2mms[22m[39m
[90mstdout[2m | tests/unit/useAutoScroll.test.ts[2m > [22m[2museAutoScroll[2m > [22m[2mshould scroll immediately if element exists
[22m[39m[AutoScroll] Element found: test-id, scrolling...

[90mstdout[2m | tests/unit/useAutoScroll.test.ts[2m > [22m[2museAutoScroll[2m > [22m[2mshould start observer if element does not exist initially
[22m[39m[AutoScroll] Elements [test-id] not found, starting observer...
[AutoScroll] Element found: test-id, scrolling...

[90mstdout[2m | tests/unit/useAutoScroll.test.ts[2m > [22m[2museAutoScroll[2m > [22m[2mshould timeout if element is never found
[22m[39m[AutoScroll] Elements [test-id] not found, starting observer...

stderr | tests/unit/useAutoScroll.test.ts > useAutoScroll > should timeout if element is never found
[AutoScroll] Timeout reached for [test-id]

 [32mÃ”Â£Ã´[39m tests/unit/useAutoScroll.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 63[2mms[22m[39m
[90mstdout[2m | tests/unit/ResultDisplay.test.tsx[2m > [22m[2mResultDisplay Component[2m > [22m[2mrenders text search results correctly
[22m[39m[AutoScroll] Elements [pos-test] not found, starting observer...

 [32mÃ”Â£Ã´[39m tests/unit/Sidebar.test.tsx [2m([22m[2m4 tests[22m[2m)[22m[32m 121[2mms[22m[39m
stderr | tests/unit/AIChat.test.tsx > AIChat Component > handles API error gracefully
Error: Network Error
    at C:/Users/israe/Downloads/faz tudo/Fiscal/client/tests/unit/AIChat.test.tsx:70:36
    at file:///C:/Users/israe/Downloads/faz%20tudo/Fiscal/client/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///C:/Users/israe/Downloads/faz%20tudo/Fiscal/client/node_modules/@vitest/runner/dist/index.js:915:26
    at file:///C:/Users/israe/Downloads/faz%20tudo/Fiscal/client/node_modules/@vitest/runner/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///C:/Users/israe/Downloads/faz%20tudo/Fiscal/client/node_modules/@vitest/runner/dist/index.js:1209:10)
    at file:///C:/Users/israe/Downloads/faz%20tudo/Fiscal/client/node_modules/@vitest/runner/dist/index.js:1653:37
    at Traces.$ (file:///C:/Users/israe/Downloads/faz%20tudo/Fiscal/client/node_modules/vitest/dist/chunks/traces.CCmnQaNT.js:142:27)
    at trace (file:///C:/Users/israe/Downloads/faz%20tudo/Fiscal/client/node_modules/vitest/dist/chunks/test.B8ej_ZHS.js:239:21)
    at runTest (file:///C:/Users/israe/Downloads/faz%20tudo/Fiscal/client/node_modules/@vitest/runner/dist/index.js:1653:12)

[90mstdout[2m | tests/integration/NcmScroll.test.tsx[2m > [22m[2mResultDisplay Auto-Scroll[2m > [22m[2mshould scroll to and highlight NCM anchor when data is loaded
[22m[39m[AutoScroll] Element found: pos-85-17, scrolling...

[90mstdout[2m | tests/integration/NcmScroll.test.tsx[2m > [22m[2mResultDisplay Auto-Scroll[2m > [22m[2mshould handle dotless query by matching dotted anchor
[22m[39m[AutoScroll] Element found: pos-85-17, scrolling...

[90mstdout[2m | tests/integration/NcmScroll.test.tsx[2m > [22m[2mResultDisplay Auto-Scroll[2m > [22m[2mshould not scroll for non-NCM search like plain text
[22m[39m[AutoScroll] Elements [pos-computador] not found, starting observer...

 [32mÃ”Â£Ã´[39m tests/integration/NcmScroll.test.tsx [2m([22m[2m4 tests[22m[2m | [22m[33m1 skipped[39m[2m)[22m[32m 105[2mms[22m[39m
[90mstdout[2m | tests/performance/ResultRender.perf.test.tsx[2m > [22m[2mFrontend Render Performance[2m > [22m[2mrenders large result set within 300ms
[22m[39m
[PERF] Render Time for 50 items: 113.56ms

 [32mÃ”Â£Ã´[39m tests/performance/ResultRender.perf.test.tsx [2m([22m[2m1 test[22m[2m)[22m[32m 128[2mms[22m[39m
 [32mÃ”Â£Ã´[39m tests/unit/SearchBar.test.tsx [2m([22m[2m9 tests[22m[2m)[22m[33m 669[2mms[22m[39m
     [33m[2mÃ”Â£Ã´[22m[39m renders correctly [33m 384[2mms[22m[39m
 [32mÃ”Â£Ã´[39m tests/unit/AIChat.test.tsx [2m([22m[2m5 tests[22m[2m)[22m[33m 422[2mms[22m[39m
 [32mÃ”Â£Ã´[39m tests/unit/ResultDisplay.test.tsx [2m([22m[2m3 tests[22m[2m)[22m[33m 448[2mms[22m[39m
     [33m[2mÃ”Â£Ã´[22m[39m renders markdown content correctly [33m 334[2mms[22m[39m
 [32mÃ”Â£Ã´[39m tests/unit/SettingsModal.test.tsx [2m([22m[2m7 tests[22m[2m)[22m[33m 535[2mms[22m[39m
stderr | tests/unit/ContextSwitch.test.tsx > App Analysis - Context Switch > Scenario 1: Clicking TIPI on an EMPTY tab should update the current tab (no new tab)
In HTML, <button> cannot be a descendant of <button>.
This will cause a hydration error.

  <App>
    <Fe>
    <StatsModal>
    <LoginModal>
    <SettingsModal>
    <TutorialModal>
    <ComparatorModal>
    <CrossNavContextMenu>
    <GlossaryModal>
    <Layout onSearch={function} doc="nesh" setDoc={function setDoc} onMenuOpen={function onMenuOpen} ...>
      <div className="app-layout">
        <Header>
        <main className="main-content">
          <TabsBar tabs={[...]} activeTabId="tab-1" onSwitch={function} onClose={function} onNewTab={function onNewTab}>
            <div className="tabs-conta...">
>             <button ref={function ref} className="tab-btn active" data-document="nesh" onClick={function onClick}>
                <span>
                <span>
>               <button className="tab-close" title="Fechar aba" onClick={function onClick}>
              ...
          ...


 [31mÃ”Ã˜Â»[39m tests/unit/ContextSwitch.test.tsx [2m([22m[2m2 tests[22m[2m | [22m[31m2 failed[39m[2m)[22m[32m 94[2mms[22m[39m
[31m     [31mâ”œÃ¹[31m Scenario 1: Clicking TIPI on an EMPTY tab should update the current tab (no new tab)[39m[32m 75[2mms[22m[39m
[31m     [31mâ”œÃ¹[31m Scenario 2: Clicking TIPI on a POPULATED tab should open a NEW tab[39m[32m 16[2mms[22m[39m
stderr | tests/integration/AppSearch.test.tsx > App Search Integration > displays loading spinner and then results when searching
In HTML, <button> cannot be a descendant of <button>.
This will cause a hydration error.

  <AuthProvider>
    <SettingsProvider>
      <App>
        <Fe>
        <StatsModal>
        <LoginModal>
        <SettingsModal>
        <TutorialModal>
        <ComparatorModal>
        <CrossNavContextMenu>
        <GlossaryModal>
        <Layout onSearch={function} doc="nesh" setDoc={function setDoc} onMenuOpen={function onMenuOpen} ...>
          <div className="app-layout">
            <Header>
            <main className="main-content">
              <TabsBar tabs={[...]} activeTabId="tab-1" onSwitch={function} onClose={function} ...>
                <div className="tabs-conta...">
>                 <button ref={function ref} className="tab-btn active" data-document="nesh" onClick={function onClick}>
                    <span>
                    <span>
>                   <button className="tab-close" title="Fechar aba" onClick={function onClick}>
                  ...
              ...


 [31mÃ”Ã˜Â»[39m tests/integration/AppSearch.test.tsx [2m([22m[2m1 test[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 74[2mms[22m[39m
[31m     [31mâ”œÃ¹[31m displays loading spinner and then results when searching[39m[32m 71[2mms[22m[39m

Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â» Failed Tests 3 Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»

 FAIL  tests/integration/AppSearch.test.tsx > App Search Integration > displays loading spinner and then results when searching
 FAIL  tests/unit/ContextSwitch.test.tsx > App Analysis - Context Switch > Scenario 1: Clicking TIPI on an EMPTY tab should update the current tab (no new tab)
 FAIL  tests/unit/ContextSwitch.test.tsx > App Analysis - Context Switch > Scenario 2: Clicking TIPI on a POPULATED tab should open a NEW tab
TypeError: activeTabElement.scrollIntoView is not a function
 Ã”Ã˜Â» src/components/TabsBar.tsx:19:30
     17|         const activeTabElement = tabRefs.current.get(activeTabId);
     18|         if (activeTabElement) {
     19|             activeTabElement.scrollIntoView({
       |                              ^
     20|                 behavior: 'smooth',
     21|                 block: 'nearest',
 Ã”Ã˜Â» Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25989:20
 Ã”Ã˜Â» runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 Ã”Ã˜Â» commitHookEffectListMount node_modules/react-dom/cjs/react-dom-client.development.js:13249:29
 Ã”Ã˜Â» commitHookPassiveMountEffects node_modules/react-dom/cjs/react-dom-client.development.js:13336:11
 Ã”Ã˜Â» commitPassiveMountOnFiber node_modules/react-dom/cjs/react-dom-client.development.js:15484:13
 Ã”Ã˜Â» recursivelyTraversePassiveMountEffects node_modules/react-dom/cjs/react-dom-client.development.js:15439:11
 Ã”Ã˜Â» commitPassiveMountOnFiber node_modules/react-dom/cjs/react-dom-client.development.js:15718:11
 Ã”Ã˜Â» recursivelyTraversePassiveMountEffects node_modules/react-dom/cjs/react-dom-client.development.js:15439:11
 Ã”Ã˜Â» commitPassiveMountOnFiber node_modules/react-dom/cjs/react-dom-client.development.js:15718:11

Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»[1/3]Ã”Ã„Â»


[2m Test Files [22m [1m[31m2 failed[39m[22m[2m | [22m[1m[32m9 passed[39m[22m[90m (11)[39m
[2m      Tests [22m [1m[31m3 failed[39m[22m[2m | [22m[1m[32m40 passed[39m[22m[2m | [22m[33m1 skipped[39m[90m (44)[39m
[2m   Start at [22m 00:41:31
[2m   Duration [22m 5.95s[2m (transform 3.63s, setup 9.89s, import 8.13s, tests 2.67s, environment 32.72s)[22m

